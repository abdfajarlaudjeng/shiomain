<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database BBFS Sering Keluar - Analisis Togel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .bbfs-hot {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            animation: pulse 2s infinite;
        }
        .bbfs-warm {
            background: linear-gradient(135deg, #ffa726 0%, #ff9800 100%);
            color: white;
        }
        .bbfs-cool {
            background: linear-gradient(135deg, #42a5f5 0%, #2196f3 100%);
            color: white;
        }
        .bbfs-cold {
            background: linear-gradient(135deg, #66bb6a 0%, #4caf50 100%);
            color: white;
        }
        .bbfs-generator {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
        }
        .frequency-bar {
            height: 4px;
            background: linear-gradient(90deg, #ff6b6b 0%, #ffa726 50%, #42a5f5 100%);
            border-radius: 2px;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .digit-badge {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            font-size: 0.75rem;
            padding: 2px 6px;
            border-radius: 4px;
        }
        .pattern-badge {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            font-size: 0.75rem;
            padding: 2px 6px;
            border-radius: 4px;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-6 py-4">
            <h1 class="text-3xl font-bold text-center">üéØ Database BBFS Sering Keluar</h1>
            <p class="text-center text-white opacity-90 mt-2">Analisis lengkap BBFS (Bolak-Balik Full Set) berdasarkan data historis</p>
        </div>
    </header>

    <div class="container mx-auto px-6 py-8 max-w-7xl">
        <!-- Filter & Controls -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            <!-- Filter Kategori -->
            <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">üéØ Filter Kategori BBFS</h3>
                <div class="space-y-3">
                    <button id="filterAll" class="w-full bg-purple-500 text-white px-4 py-2 rounded-lg transition-colors hover:bg-purple-600">
                        üî• Semua BBFS
                    </button>
                    <button id="filterHot" class="w-full bg-red-500 text-white px-4 py-2 rounded-lg transition-colors hover:bg-red-600">
                        üå°Ô∏è Super Hot (85%+)
                    </button>
                    <button id="filterWarm" class="w-full bg-orange-500 text-white px-4 py-2 rounded-lg transition-colors hover:bg-orange-600">
                        üî• Hot (65-84%)
                    </button>
                    <button id="filterCool" class="w-full bg-blue-500 text-white px-4 py-2 rounded-lg transition-colors hover:bg-blue-600">
                        ‚ùÑÔ∏è Warm (45-64%)
                    </button>
                    <button id="filterCold" class="w-full bg-green-500 text-white px-4 py-2 rounded-lg transition-colors hover:bg-green-600">
                        üßä Cool (25-44%)
                    </button>
                </div>
            </div>

            <!-- Prediksi BBFS Kepala Ekor -->
            <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">üéØ Prediksi BBFS Kepala-Ekor</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Input Kepala (2D)</label>
                        <input type="text" id="kepalaInput" placeholder="Contoh: 12, 34, 56..." 
                               maxlength="2" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Input Ekor (2D)</label>
                        <input type="text" id="ekorInput" placeholder="Contoh: 78, 90, 23..." 
                               maxlength="2" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500">
                    </div>
                    <button id="predictBBFS" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-lg transition-colors hover:opacity-90">
                        üîÆ Prediksi BBFS
                    </button>
                    <div id="predictionResult" class="hidden">
                        <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-3 border border-green-200">
                            <div class="text-sm font-medium text-gray-700 mb-2">Prediksi BBFS:</div>
                            <div id="predictedBBFS" class="font-bold text-lg text-green-700"></div>
                            <div class="text-xs text-gray-600 mt-1">
                                Akurasi: <span id="predictionAccuracy" class="font-semibold"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pembunuh Angka 4D -->
            <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">üéØ Pembunuh Angka 4D</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">BBFS Awal (5-8 digit)</label>
                        <input type="text" id="bbfsInput" placeholder="Contoh: 01234567" 
                               maxlength="8" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-red-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Angka yang Ingin Dibunuh</label>
                        <div class="grid grid-cols-5 gap-2" id="killDigitSelector">
                            <button class="kill-digit-btn bg-gray-200 hover:bg-red-200 rounded-lg p-2 text-center font-bold transition-colors" data-digit="0">0</button>
                            <button class="kill-digit-btn bg-gray-200 hover:bg-red-200 rounded-lg p-2 text-center font-bold transition-colors" data-digit="1">1</button>
                            <button class="kill-digit-btn bg-gray-200 hover:bg-red-200 rounded-lg p-2 text-center font-bold transition-colors" data-digit="2">2</button>
                            <button class="kill-digit-btn bg-gray-200 hover:bg-red-200 rounded-lg p-2 text-center font-bold transition-colors" data-digit="3">3</button>
                            <button class="kill-digit-btn bg-gray-200 hover:bg-red-200 rounded-lg p-2 text-center font-bold transition-colors" data-digit="4">4</button>
                            <button class="kill-digit-btn bg-gray-200 hover:bg-red-200 rounded-lg p-2 text-center font-bold transition-colors" data-digit="5">5</button>
                            <button class="kill-digit-btn bg-gray-200 hover:bg-red-200 rounded-lg p-2 text-center font-bold transition-colors" data-digit="6">6</button>
                            <button class="kill-digit-btn bg-gray-200 hover:bg-red-200 rounded-lg p-2 text-center font-bold transition-colors" data-digit="7">7</button>
                            <button class="kill-digit-btn bg-gray-200 hover:bg-red-200 rounded-lg p-2 text-center font-bold transition-colors" data-digit="8">8</button>
                            <button class="kill-digit-btn bg-gray-200 hover:bg-red-200 rounded-lg p-2 text-center font-bold transition-colors" data-digit="9">9</button>
                        </div>
                        <div class="mt-2 text-sm text-gray-600">
                            Angka Dibunuh: <span id="killedDigits" class="font-bold text-red-600">-</span>
                        </div>
                    </div>
                    <button id="killNumbers" class="w-full bg-gradient-to-r from-red-500 to-pink-500 text-white px-4 py-2 rounded-lg transition-colors hover:opacity-90">
                        üíÄ Bunuh Angka & Generate 4D
                    </button>
                    <div id="killResult" class="hidden">
                        <div class="bg-gradient-to-r from-red-50 to-pink-50 rounded-lg p-3 border border-red-200">
                            <div class="text-sm font-medium text-gray-700 mb-2">Hasil Pembunuhan Angka:</div>
                            <div class="grid grid-cols-2 gap-2 mb-2">
                                <div class="text-center">
                                    <div class="text-xs text-gray-600">BBFS Tersisa</div>
                                    <div id="remainingBBFS" class="font-bold text-lg text-green-700"></div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-gray-600">Total 4D</div>
                                    <div id="total4D" class="font-bold text-lg text-blue-700"></div>
                                </div>
                            </div>
                            <div class="text-xs text-gray-600 mb-2">
                                <div>Angka Terbunuh: <span id="killedList" class="font-semibold text-red-600"></span></div>
                                <div>Efektivitas: <span id="killEffectiveness" class="font-semibold text-green-600"></span></div>
                            </div>
                            <div id="generated4D" class="max-h-32 overflow-y-auto bg-white rounded p-2 border">
                                <!-- 4D results will appear here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Angka Main Pasaran Jawa -->
            <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">üèõÔ∏è Angka Main Pasaran Jawa</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Pilih Pasaran Jawa</label>
                        <select id="pasaranSelect" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500">
                            <option value="">-- Pilih Pasaran --</option>
                            <option value="pon">Pon (Kliwon)</option>
                            <option value="wage">Wage</option>
                            <option value="kliwon">Kliwon</option>
                            <option value="legi">Legi</option>
                            <option value="pahing">Pahing</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Weton Hari Ini</label>
                        <div id="currentWeton" class="bg-orange-50 rounded-lg p-3 border border-orange-200">
                            <div class="text-sm text-orange-700">Hari ini: <span id="todayWeton" class="font-bold"></span></div>
                            <div class="text-xs text-orange-600 mt-1">Neptu: <span id="todayNeptu" class="font-semibold"></span></div>
                        </div>
                    </div>
                    <button id="generateJawaNumbers" class="w-full bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 rounded-lg transition-colors hover:opacity-90">
                        üèõÔ∏è Generate Angka Jawa
                    </button>
                    <div id="jawaNumbersResult" class="hidden">
                        <div class="bg-gradient-to-r from-orange-50 to-red-50 rounded-lg p-3 border border-orange-200">
                            <div class="text-sm font-medium text-gray-700 mb-2">Angka Main Pasaran Jawa:</div>
                            <div class="grid grid-cols-2 gap-2 mb-2">
                                <div class="text-center">
                                    <div class="text-xs text-gray-600">2D Main</div>
                                    <div id="jawa2D" class="font-bold text-lg text-orange-700"></div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-gray-600">BBFS Jawa</div>
                                    <div id="jawaBBFS" class="font-bold text-lg text-red-700"></div>
                                </div>
                            </div>
                            <div class="text-xs text-gray-600">
                                <div>Pasaran: <span id="selectedPasaran" class="font-semibold"></span></div>
                                <div>Makna: <span id="pasaranMeaning" class="font-semibold"></span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filter Digit -->
            <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">üî¢ Filter Jumlah Digit</h3>
                <div class="space-y-3">
                    <button id="filter4D" class="w-full bg-indigo-500 text-white px-4 py-2 rounded-lg transition-colors hover:bg-indigo-600">
                        4Ô∏è‚É£ BBFS 4 Digit
                    </button>
                    <button id="filter5D" class="w-full bg-teal-500 text-white px-4 py-2 rounded-lg transition-colors hover:bg-teal-600">
                        5Ô∏è‚É£ BBFS 5 Digit
                    </button>
                    <button id="filter6D" class="w-full bg-pink-500 text-white px-4 py-2 rounded-lg transition-colors hover:bg-pink-600">
                        6Ô∏è‚É£ BBFS 6 Digit
                    </button>
                    <button id="filter7D" class="w-full bg-yellow-500 text-white px-4 py-2 rounded-lg transition-colors hover:bg-yellow-600">
                        7Ô∏è‚É£ BBFS 7 Digit
                    </button>
                    <button id="filter8D" class="w-full bg-gray-500 text-white px-4 py-2 rounded-lg transition-colors hover:bg-gray-600">
                        8Ô∏è‚É£ BBFS 8+ Digit
                    </button>
                </div>
            </div>
        </div>

        <!-- Statistik Section -->
        <div class="grid grid-cols-1 lg:grid-cols-1 gap-6 mb-8">
            <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">üìà Statistik BBFS</h3>
                <div class="space-y-4">
                    <div class="stat-card rounded-lg p-3">
                        <div class="text-sm opacity-90">Total BBFS Tracked</div>
                        <div class="text-2xl font-bold" id="totalNumbers">120</div>
                    </div>
                    <div class="bg-red-100 rounded-lg p-3">
                        <div class="text-sm text-red-700">Super Hot BBFS</div>
                        <div class="text-xl font-bold text-red-800" id="hotCount">18</div>
                    </div>
                    <div class="bg-orange-100 rounded-lg p-3">
                        <div class="text-sm text-orange-700">Hot BBFS</div>
                        <div class="text-xl font-bold text-orange-800" id="warmCount">35</div>
                    </div>
                    <div class="bg-blue-100 rounded-lg p-3">
                        <div class="text-sm text-blue-700">Warm BBFS</div>
                        <div class="text-xl font-bold text-blue-800" id="coolCount">42</div>
                    </div>
                    <div class="bg-purple-100 rounded-lg p-3">
                        <div class="text-sm text-purple-700">Avg Kombinasi</div>
                        <div class="text-xl font-bold text-purple-800" id="avgCombo">24</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Search & Sort -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8 card-hover">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">üîç Cari BBFS</label>
                    <input type="text" id="searchInput" placeholder="Cari BBFS..." 
                           class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-purple-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">üìä Urutkan</label>
                    <select id="sortSelect" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-purple-500">
                        <option value="frequency">Frekuensi Tertinggi</option>
                        <option value="combinations">Kombinasi Terbanyak</option>
                        <option value="digits">Jumlah Digit</option>
                        <option value="recent">Terakhir Keluar</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">üìã Tampilan</label>
                    <select id="viewSelect" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-purple-500">
                        <option value="grid">Grid View</option>
                        <option value="list">List Detail</option>
                        <option value="compact">Compact</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">üé∞ Generator</label>
                    <button id="generateBtn" class="w-full bbfs-generator px-4 py-2 rounded-lg transition-colors hover:opacity-90">
                        Generate BBFS
                    </button>
                </div>
            </div>
        </div>

        <!-- Results Display -->
        <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-semibold text-gray-800">üéØ Database BBFS</h3>
                <div class="flex space-x-2">
                    <button id="exportBtn" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                        üíæ Export
                    </button>
                    <button id="refreshBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                        üîÑ Refresh
                    </button>
                </div>
            </div>

            <!-- Legend -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                <div class="flex items-center space-x-2">
                    <div class="w-4 h-4 bg-red-500 rounded"></div>
                    <span class="text-sm">Super Hot (85%+)</span>
                </div>
                <div class="flex items-center space-x-2">
                    <div class="w-4 h-4 bg-orange-500 rounded"></div>
                    <span class="text-sm">Hot (65-84%)</span>
                </div>
                <div class="flex items-center space-x-2">
                    <div class="w-4 h-4 bg-blue-500 rounded"></div>
                    <span class="text-sm">Warm (45-64%)</span>
                </div>
                <div class="flex items-center space-x-2">
                    <div class="w-4 h-4 bg-green-500 rounded"></div>
                    <span class="text-sm">Cool (25-44%)</span>
                </div>
            </div>

            <!-- BBFS Display -->
            <div id="numbersDisplay" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- BBFS will be populated by JavaScript -->
            </div>

            <div class="text-center mt-6">
                <span class="text-sm text-gray-600">Menampilkan <span id="displayCount">0</span> dari <span id="totalCount">0</span> BBFS</span>
            </div>
        </div>

        <!-- Analysis Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8">
            <!-- Top BBFS Performers -->
            <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">üèÜ Top 10 BBFS Performer</h3>
                <div id="topPerformers" class="space-y-3">
                    <!-- Top performers will be populated by JavaScript -->
                </div>
            </div>

            <!-- Hot BBFS This Week -->
            <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">üî• Hot BBFS Minggu Ini</h3>
                <div id="recentHot" class="space-y-3">
                    <!-- Recent hot BBFS will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- BBFS Generator Modal -->
        <div id="generatorModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
            <div class="bg-white rounded-xl shadow-2xl p-8 max-w-2xl w-full mx-4 max-h-96 overflow-y-auto">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-bold text-gray-800">üé∞ BBFS Generator</h3>
                    <button id="closeModal" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Pilih Digit BBFS (4-9 digit)</label>
                        <div class="grid grid-cols-5 gap-2" id="digitSelector">
                            <button class="digit-btn bg-gray-200 hover:bg-purple-200 rounded-lg p-3 text-center font-bold transition-colors" data-digit="0">0</button>
                            <button class="digit-btn bg-gray-200 hover:bg-purple-200 rounded-lg p-3 text-center font-bold transition-colors" data-digit="1">1</button>
                            <button class="digit-btn bg-gray-200 hover:bg-purple-200 rounded-lg p-3 text-center font-bold transition-colors" data-digit="2">2</button>
                            <button class="digit-btn bg-gray-200 hover:bg-purple-200 rounded-lg p-3 text-center font-bold transition-colors" data-digit="3">3</button>
                            <button class="digit-btn bg-gray-200 hover:bg-purple-200 rounded-lg p-3 text-center font-bold transition-colors" data-digit="4">4</button>
                            <button class="digit-btn bg-gray-200 hover:bg-purple-200 rounded-lg p-3 text-center font-bold transition-colors" data-digit="5">5</button>
                            <button class="digit-btn bg-gray-200 hover:bg-purple-200 rounded-lg p-3 text-center font-bold transition-colors" data-digit="6">6</button>
                            <button class="digit-btn bg-gray-200 hover:bg-purple-200 rounded-lg p-3 text-center font-bold transition-colors" data-digit="7">7</button>
                            <button class="digit-btn bg-gray-200 hover:bg-purple-200 rounded-lg p-3 text-center font-bold transition-colors" data-digit="8">8</button>
                            <button class="digit-btn bg-gray-200 hover:bg-purple-200 rounded-lg p-3 text-center font-bold transition-colors" data-digit="9">9</button>
                        </div>
                        <div class="mt-2 text-sm text-gray-600">
                            Dipilih: <span id="selectedDigits" class="font-bold">-</span> 
                            (<span id="digitCount">0</span>/9 digit)
                        </div>
                    </div>
                    
                    <div class="flex space-x-4">
                        <button id="generateCombinations" class="flex-1 bbfs-generator px-4 py-3 rounded-lg font-semibold transition-colors hover:opacity-90">
                            üéØ Generate Kombinasi
                        </button>
                        <button id="clearSelection" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-3 rounded-lg transition-colors">
                            üóëÔ∏è Clear
                        </button>
                    </div>
                    
                    <div id="generatedCombinations" class="mt-4 max-h-48 overflow-y-auto">
                        <!-- Generated combinations will appear here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Tips Section -->
        <div class="bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mt-8 text-white">
            <h3 class="text-lg font-semibold mb-4">üí° Tips Menggunakan BBFS</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm">
                <div>
                    <h4 class="font-semibold mb-2">üéØ Strategi BBFS:</h4>
                    <ul class="space-y-1 opacity-90">
                        <li>‚Ä¢ Pilih BBFS dengan frekuensi tinggi</li>
                        <li>‚Ä¢ Kombinasikan 4-6 digit untuk hasil optimal</li>
                        <li>‚Ä¢ Perhatikan pola digit yang sering muncul</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-2">üìä Analisis Kombinasi:</h4>
                    <ul class="space-y-1 opacity-90">
                        <li>‚Ä¢ BBFS 5-6 digit memberikan peluang seimbang</li>
                        <li>‚Ä¢ Hindari terlalu banyak digit berurutan</li>
                        <li>‚Ä¢ Mix digit genap dan ganjil</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-2">üî• Hot BBFS Tips:</h4>
                    <ul class="space-y-1 opacity-90">
                        <li>‚Ä¢ Super Hot BBFS keluar 2-3x per minggu</li>
                        <li>‚Ä¢ Kombinasi dengan ekor ON untuk presisi</li>
                        <li>‚Ä¢ Monitor tren mingguan dan bulanan</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-2">üíÄ Pembunuh Angka 4D:</h4>
                    <ul class="space-y-1 opacity-90">
                        <li>‚Ä¢ Bunuh digit yang tidak diinginkan dari BBFS</li>
                        <li>‚Ä¢ Generate semua kombinasi 4D dari digit tersisa</li>
                        <li>‚Ä¢ Efektivitas tinggi untuk mengurangi kombinasi</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Database Pasaran Jawa dan Weton
        const pasaranJawaDatabase = {
            pon: {
                neptu: 7,
                meaning: "Hari baik untuk memulai usaha baru",
                angkaMain: [7, 2, 9, 4],
                bbfsPattern: ['02479', '27904', '79024', '04792']
            },
            wage: {
                neptu: 4,
                meaning: "Hari yang cocok untuk perdagangan",
                angkaMain: [4, 1, 8, 5],
                bbfsPattern: ['01458', '41850', '85014', '50148']
            },
            kliwon: {
                neptu: 8,
                meaning: "Hari spiritual dan keberuntungan",
                angkaMain: [8, 3, 0, 6],
                bbfsPattern: ['03680', '83600', '60038', '00386']
            },
            legi: {
                neptu: 5,
                meaning: "Hari yang baik untuk belajar",
                angkaMain: [5, 2, 7, 1],
                bbfsPattern: ['12575', '52710', '71025', '25175']
            },
            pahing: {
                neptu: 9,
                meaning: "Hari untuk mencari rejeki",
                angkaMain: [9, 6, 3, 1],
                bbfsPattern: ['13690', '96310', '31069', '69013']
            }
        };

        const hariJawa = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
        const pasaranJawa = ['Kliwon', 'Legi', 'Pahing', 'Pon', 'Wage'];
        
        const neptuHari = {
            'Minggu': 5, 'Senin': 4, 'Selasa': 3, 'Rabu': 7, 
            'Kamis': 8, 'Jumat': 6, 'Sabtu': 9
        };

        const neptuPasaran = {
            'Kliwon': 8, 'Legi': 5, 'Pahing': 9, 'Pon': 7, 'Wage': 4
        };

        // Database tanggal untuk prediksi BBFS
        const dateBasedBBFS = {
            // Berdasarkan hari dalam seminggu
            0: ['05679', '50967', '96750'], // Minggu
            1: ['14568', '41865', '68514'], // Senin  
            2: ['23479', '32974', '79423'], // Selasa
            3: ['37890', '78903', '90378'], // Rabu
            4: ['48901', '89014', '01489'], // Kamis
            5: ['56012', '60125', '12560'], // Jumat
            6: ['69123', '91236', '23691']  // Sabtu
        };

        // Database bulan untuk modifikasi BBFS
        const monthModifiers = {
            1: [1, 0, 2], 2: [2, 1, 3], 3: [3, 2, 4], 4: [4, 3, 5],
            5: [5, 4, 6], 6: [6, 5, 7], 7: [7, 6, 8], 8: [8, 7, 9],
            9: [9, 8, 0], 10: [0, 9, 1], 11: [1, 0, 2], 12: [2, 1, 3]
        };

        // Fungsi untuk menghitung weton hari ini
        function getCurrentWeton() {
            const today = new Date();
            const dayOfWeek = today.getDay();
            const dayName = hariJawa[dayOfWeek];
            
            // Hitung pasaran berdasarkan tanggal (siklus 5 hari)
            // Referensi: 1 Januari 1900 adalah Pon
            const referenceDate = new Date(1900, 0, 1);
            const daysDiff = Math.floor((today - referenceDate) / (1000 * 60 * 60 * 24));
            const pasaranIndex = (daysDiff + 3) % 5; // +3 karena 1 Jan 1900 adalah Pon (index 3)
            const pasaranName = pasaranJawa[pasaranIndex];
            
            const neptuTotal = neptuHari[dayName] + neptuPasaran[pasaranName];
            
            return {
                hari: dayName,
                pasaran: pasaranName,
                neptu: neptuTotal,
                weton: `${dayName} ${pasaranName}`
            };
        }

        // Fungsi prediksi BBFS berdasarkan tanggal
        function predictBBFSByDate(date) {
            const selectedDate = new Date(date);
            const dayOfWeek = selectedDate.getDay();
            const dayName = hariJawa[dayOfWeek];
            const month = selectedDate.getMonth() + 1;
            const dayOfMonth = selectedDate.getDate();
            
            // Ambil BBFS dasar berdasarkan hari
            const baseBBFS = dateBasedBBFS[dayOfWeek];
            const selectedBBFS = baseBBFS[Math.floor(Math.random() * baseBBFS.length)];
            
            // Modifikasi berdasarkan bulan
            const monthMod = monthModifiers[month];
            let modifiedBBFS = selectedBBFS;
            
            // Tambahkan digit bulan jika belum ada
            for (let digit of monthMod) {
                if (!modifiedBBFS.includes(digit.toString())) {
                    modifiedBBFS = modifiedBBFS + digit.toString();
                    break;
                }
            }
            
            // Modifikasi berdasarkan tanggal
            const dateDigits = dayOfMonth.toString().split('');
            for (let digit of dateDigits) {
                if (!modifiedBBFS.includes(digit) && modifiedBBFS.length < 7) {
                    modifiedBBFS = modifiedBBFS + digit;
                }
            }
            
            // Urutkan digit untuk BBFS final
            const finalBBFS = [...new Set(modifiedBBFS)].sort().join('');
            
            // Hitung akurasi berdasarkan pola
            let accuracy = 70;
            if (dayOfWeek === 0 || dayOfWeek === 6) accuracy += 10; // Weekend bonus
            if (month === new Date().getMonth() + 1) accuracy += 5; // Bulan ini bonus
            if (dayOfMonth % 7 === 0) accuracy += 8; // Kelipatan 7 bonus
            
            return {
                bbfs: finalBBFS,
                dayName: dayName,
                accuracy: Math.min(accuracy, 95)
            };
        }

        // Fungsi generate angka berdasarkan pasaran Jawa
        function generateJawaNumbers(pasaran) {
            if (!pasaran || !pasaranJawaDatabase[pasaran]) {
                return null;
            }
            
            const pasaranData = pasaranJawaDatabase[pasaran];
            const currentWeton = getCurrentWeton();
            
            // Generate 2D main berdasarkan neptu
            const neptuTotal = pasaranData.neptu + currentWeton.neptu;
            const main2D = (neptuTotal % 100).toString().padStart(2, '0');
            
            // Pilih BBFS pattern
            const bbfsPattern = pasaranData.bbfsPattern[Math.floor(Math.random() * pasaranData.bbfsPattern.length)];
            
            // Modifikasi BBFS berdasarkan tanggal hari ini
            const today = new Date();
            const todayDigit = (today.getDate() % 10).toString();
            let finalBBFS = bbfsPattern;
            
            if (!finalBBFS.includes(todayDigit)) {
                finalBBFS = finalBBFS + todayDigit;
                finalBBFS = [...new Set(finalBBFS)].sort().join('');
            }
            
            return {
                main2D: main2D,
                bbfs: finalBBFS,
                pasaran: pasaran,
                meaning: pasaranData.meaning,
                neptu: pasaranData.neptu
            };
        }

        // Fungsi untuk membunuh angka dari BBFS
        function killDigitsFromBBFS(bbfs, digitsToKill) {
            if (!bbfs || bbfs.length < 4) {
                return null;
            }
            
            // Hapus digit yang ingin dibunuh
            const remainingDigits = bbfs.split('').filter(digit => !digitsToKill.has(digit));
            
            // Pastikan minimal 4 digit tersisa
            if (remainingDigits.length < 4) {
                return null;
            }
            
            const remainingBBFS = [...new Set(remainingDigits)].sort().join('');
            
            // Generate semua kombinasi 4D dari digit yang tersisa
            const all4D = [];
            
            function generate4DPermutations(digits) {
                if (digits.length < 4) return [];
                
                const result = [];
                
                // Generate semua permutasi 4 digit
                for (let i = 0; i < digits.length; i++) {
                    for (let j = 0; j < digits.length; j++) {
                        for (let k = 0; k < digits.length; k++) {
                            for (let l = 0; l < digits.length; l++) {
                                const combo = digits[i] + digits[j] + digits[k] + digits[l];
                                result.push(combo);
                            }
                        }
                    }
                }
                
                return [...new Set(result)].sort();
            }
            
            const generated4D = generate4DPermutations(remainingDigits);
            
            // Hitung efektivitas pembunuhan
            const originalCombinations = Math.pow(bbfs.length, 4);
            const newCombinations = generated4D.length;
            const effectiveness = Math.round(((originalCombinations - newCombinations) / originalCombinations) * 100);
            
            return {
                remainingBBFS: remainingBBFS,
                generated4D: generated4D,
                totalCombinations: newCombinations,
                effectiveness: effectiveness,
                killedDigits: Array.from(digitsToKill).sort()
            };
        }

        // Fungsi untuk update tampilan digit yang dibunuh
        function updateKilledDigits() {
            document.getElementById('killedDigits').textContent = 
                killedDigits.size > 0 ? Array.from(killedDigits).sort().join(', ') : '-';
        }

        // Database Kepala-Ekor untuk prediksi BBFS
        const kepalaEkorDatabase = {
            // Kepala 2D dengan BBFS yang sering muncul
            '01': ['01234', '01567', '01789', '01368'],
            '02': ['02468', '02579', '02346', '02189'],
            '03': ['03579', '03468', '03127', '03689'],
            '04': ['04567', '04289', '04138', '04679'],
            '05': ['05678', '05239', '05147', '05689'],
            '06': ['06789', '06234', '06158', '06479'],
            '07': ['07890', '07345', '07169', '07258'],
            '08': ['08901', '08456', '08279', '08347'],
            '09': ['09012', '09567', '09348', '09178'],
            '10': ['10234', '10567', '10789', '10358'],
            '11': ['11234', '11567', '11890', '11479'],
            '12': ['12345', '12678', '12901', '12567'],
            '13': ['13456', '13789', '13012', '13678'],
            '14': ['14567', '14890', '14123', '14789'],
            '15': ['15678', '15901', '15234', '15890'],
            '16': ['16789', '16012', '16345', '16901'],
            '17': ['17890', '17123', '17456', '17012'],
            '18': ['18901', '18234', '18567', '18123'],
            '19': ['19012', '19345', '19678', '19234'],
            '20': ['20345', '20678', '20901', '20456'],
            '21': ['21456', '21789', '21012', '21567'],
            '22': ['22567', '22890', '22123', '22678'],
            '23': ['23678', '23901', '23234', '23789'],
            '24': ['24789', '24012', '24345', '24890'],
            '25': ['25890', '25123', '25456', '25901'],
            '26': ['26901', '26234', '26567', '26012'],
            '27': ['27012', '27345', '27678', '27123'],
            '28': ['28123', '28456', '28789', '28234'],
            '29': ['29234', '29567', '29890', '29345'],
            '30': ['30456', '30789', '30012', '30567'],
            '31': ['31567', '31890', '31123', '31678'],
            '32': ['32678', '32901', '32234', '32789'],
            '33': ['33789', '33012', '33345', '33890'],
            '34': ['34890', '34123', '34456', '34901'],
            '35': ['35901', '35234', '35567', '35012'],
            '36': ['36012', '36345', '36678', '36123'],
            '37': ['37123', '37456', '37789', '37234'],
            '38': ['38234', '38567', '38890', '38345'],
            '39': ['39345', '39678', '39901', '39456'],
            '40': ['40567', '40890', '40123', '40678'],
            '41': ['41678', '41901', '41234', '41789'],
            '42': ['42789', '42012', '42345', '42890'],
            '43': ['43890', '43123', '43456', '43901'],
            '44': ['44901', '44234', '44567', '44012'],
            '45': ['45012', '45345', '45678', '45123'],
            '46': ['46123', '46456', '46789', '46234'],
            '47': ['47234', '47567', '47890', '47345'],
            '48': ['48345', '48678', '48901', '48456'],
            '49': ['49456', '49789', '49012', '49567'],
            '50': ['50678', '50901', '50234', '50789'],
            '51': ['51789', '51012', '51345', '51890'],
            '52': ['52890', '52123', '52456', '52901'],
            '53': ['53901', '53234', '53567', '53012'],
            '54': ['54012', '54345', '54678', '54123'],
            '55': ['55123', '55456', '55789', '55234'],
            '56': ['56234', '56567', '56890', '56345'],
            '57': ['57345', '57678', '57901', '57456'],
            '58': ['58456', '58789', '58012', '58567'],
            '59': ['59567', '59890', '59123', '59678'],
            '60': ['60789', '60012', '60345', '60890'],
            '61': ['61890', '61123', '61456', '61901'],
            '62': ['62901', '62234', '62567', '62012'],
            '63': ['63012', '63345', '63678', '63123'],
            '64': ['64123', '64456', '64789', '64234'],
            '65': ['65234', '65567', '65890', '65345'],
            '66': ['66345', '66678', '66901', '66456'],
            '67': ['67456', '67789', '67012', '67567'],
            '68': ['68567', '68890', '68123', '68678'],
            '69': ['69678', '69901', '69234', '69789'],
            '70': ['70890', '70123', '70456', '70901'],
            '71': ['71901', '71234', '71567', '71012'],
            '72': ['72012', '72345', '72678', '72123'],
            '73': ['73123', '73456', '73789', '73234'],
            '74': ['74234', '74567', '74890', '74345'],
            '75': ['75345', '75678', '75901', '75456'],
            '76': ['76456', '76789', '76012', '76567'],
            '77': ['77567', '77890', '77123', '77678'],
            '78': ['78678', '78901', '78234', '78789'],
            '79': ['79789', '79012', '79345', '79890'],
            '80': ['80901', '80234', '80567', '80012'],
            '81': ['81012', '81345', '81678', '81123'],
            '82': ['82123', '82456', '82789', '82234'],
            '83': ['83234', '83567', '83890', '83345'],
            '84': ['84345', '84678', '84901', '84456'],
            '85': ['85456', '85789', '85012', '85567'],
            '86': ['86567', '86890', '86123', '86678'],
            '87': ['87678', '87901', '87234', '87789'],
            '88': ['88789', '88012', '88345', '88890'],
            '89': ['89890', '89123', '89456', '89901'],
            '90': ['90012', '90345', '90678', '90123'],
            '91': ['91123', '91456', '91789', '91234'],
            '92': ['92234', '92567', '92890', '92345'],
            '93': ['93345', '93678', '93901', '93456'],
            '94': ['94456', '94789', '94012', '94567'],
            '95': ['95567', '95890', '95123', '95678'],
            '96': ['96678', '96901', '96234', '96789'],
            '97': ['97789', '97012', '97345', '97890'],
            '98': ['98890', '98123', '98456', '98901'],
            '99': ['99901', '99234', '99567', '99012']
        };

        // Database BBFS dengan frekuensi dan kombinasi (simulasi data historis)
        const bbfsDatabase = [
            // Super Hot BBFS (85%+)
            {bbfs: '01234', frequency: 92, category: 'hot', lastSeen: '2024-01-17', digits: 5, combinations: 120, pattern: 'urut'},
            {bbfs: '56789', frequency: 90, category: 'hot', lastSeen: '2024-01-16', digits: 5, combinations: 120, pattern: 'urut'},
            {bbfs: '12345', frequency: 89, category: 'hot', lastSeen: '2024-01-15', digits: 5, combinations: 120, pattern: 'urut'},
            {bbfs: '67890', frequency: 88, category: 'hot', lastSeen: '2024-01-14', digits: 5, combinations: 120, pattern: 'urut'},
            {bbfs: '0123', frequency: 87, category: 'hot', lastSeen: '2024-01-13', digits: 4, combinations: 24, pattern: 'urut'},
            {bbfs: '5678', frequency: 86, category: 'hot', lastSeen: '2024-01-12', digits: 4, combinations: 24, pattern: 'urut'},
            {bbfs: '234567', frequency: 91, category: 'hot', lastSeen: '2024-01-18', digits: 6, combinations: 720, pattern: 'urut'},
            {bbfs: '789012', frequency: 89, category: 'hot', lastSeen: '2024-01-17', digits: 6, combinations: 720, pattern: 'urut'},
            {bbfs: '13579', frequency: 88, category: 'hot', lastSeen: '2024-01-16', digits: 5, combinations: 120, pattern: 'ganjil'},
            {bbfs: '02468', frequency: 87, category: 'hot', lastSeen: '2024-01-15', digits: 5, combinations: 120, pattern: 'genap'},
            {bbfs: '1357', frequency: 86, category: 'hot', lastSeen: '2024-01-14', digits: 4, combinations: 24, pattern: 'ganjil'},
            {bbfs: '2468', frequency: 85, category: 'hot', lastSeen: '2024-01-13', digits: 4, combinations: 24, pattern: 'genap'},
            {bbfs: '012345', frequency: 90, category: 'hot', lastSeen: '2024-01-17', digits: 6, combinations: 720, pattern: 'urut'},
            {bbfs: '456789', frequency: 89, category: 'hot', lastSeen: '2024-01-16', digits: 6, combinations: 720, pattern: 'urut'},
            {bbfs: '13468', frequency: 88, category: 'hot', lastSeen: '2024-01-15', digits: 5, combinations: 120, pattern: 'mix'},
            {bbfs: '25790', frequency: 87, category: 'hot', lastSeen: '2024-01-14', digits: 5, combinations: 120, pattern: 'mix'},
            {bbfs: '1479', frequency: 86, category: 'hot', lastSeen: '2024-01-13', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '2580', frequency: 85, category: 'hot', lastSeen: '2024-01-12', digits: 4, combinations: 24, pattern: 'mix'},

            // Hot BBFS (65-84%)
            {bbfs: '01357', frequency: 84, category: 'warm', lastSeen: '2024-01-11', digits: 5, combinations: 120, pattern: 'mix'},
            {bbfs: '24689', frequency: 83, category: 'warm', lastSeen: '2024-01-10', digits: 5, combinations: 120, pattern: 'mix'},
            {bbfs: '13579', frequency: 82, category: 'warm', lastSeen: '2024-01-09', digits: 5, combinations: 120, pattern: 'ganjil'},
            {bbfs: '02468', frequency: 81, category: 'warm', lastSeen: '2024-01-08', digits: 5, combinations: 120, pattern: 'genap'},
            {bbfs: '1234', frequency: 80, category: 'warm', lastSeen: '2024-01-07', digits: 4, combinations: 24, pattern: 'urut'},
            {bbfs: '6789', frequency: 79, category: 'warm', lastSeen: '2024-01-06', digits: 4, combinations: 24, pattern: 'urut'},
            {bbfs: '0145', frequency: 78, category: 'warm', lastSeen: '2024-01-05', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '2367', frequency: 77, category: 'warm', lastSeen: '2024-01-04', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '4589', frequency: 76, category: 'warm', lastSeen: '2024-01-03', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '012678', frequency: 83, category: 'warm', lastSeen: '2024-01-11', digits: 6, combinations: 720, pattern: 'mix'},
            {bbfs: '134579', frequency: 82, category: 'warm', lastSeen: '2024-01-10', digits: 6, combinations: 720, pattern: 'mix'},
            {bbfs: '024568', frequency: 81, category: 'warm', lastSeen: '2024-01-09', digits: 6, combinations: 720, pattern: 'mix'},
            {bbfs: '13567', frequency: 80, category: 'warm', lastSeen: '2024-01-08', digits: 5, combinations: 120, pattern: 'mix'},
            {bbfs: '02489', frequency: 79, category: 'warm', lastSeen: '2024-01-07', digits: 5, combinations: 120, pattern: 'mix'},
            {bbfs: '14678', frequency: 78, category: 'warm', lastSeen: '2024-01-06', digits: 5, combinations: 120, pattern: 'mix'},
            {bbfs: '23590', frequency: 77, category: 'warm', lastSeen: '2024-01-05', digits: 5, combinations: 120, pattern: 'mix'},
            {bbfs: '0167', frequency: 76, category: 'warm', lastSeen: '2024-01-04', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '2389', frequency: 75, category: 'warm', lastSeen: '2024-01-03', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '4567', frequency: 74, category: 'warm', lastSeen: '2024-01-02', digits: 4, combinations: 24, pattern: 'urut'},
            {bbfs: '7890', frequency: 73, category: 'warm', lastSeen: '2024-01-01', digits: 4, combinations: 24, pattern: 'urut'},
            {bbfs: '01289', frequency: 72, category: 'warm', lastSeen: '2023-12-31', digits: 5, combinations: 120, pattern: 'mix'},
            {bbfs: '34567', frequency: 71, category: 'warm', lastSeen: '2023-12-30', digits: 5, combinations: 120, pattern: 'urut'},
            {bbfs: '01678', frequency: 70, category: 'warm', lastSeen: '2023-12-29', digits: 5, combinations: 120, pattern: 'mix'},
            {bbfs: '23459', frequency: 69, category: 'warm', lastSeen: '2023-12-28', digits: 5, combinations: 120, pattern: 'mix'},
            {bbfs: '1568', frequency: 68, category: 'warm', lastSeen: '2023-12-27', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '2379', frequency: 67, category: 'warm', lastSeen: '2023-12-26', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '0489', frequency: 66, category: 'warm', lastSeen: '2023-12-25', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '1267', frequency: 65, category: 'warm', lastSeen: '2023-12-24', digits: 4, combinations: 24, pattern: 'mix'},

            // Warm BBFS (45-64%)
            {bbfs: '0234', frequency: 64, category: 'cool', lastSeen: '2023-12-23', digits: 4, combinations: 24, pattern: 'urut'},
            {bbfs: '5679', frequency: 63, category: 'cool', lastSeen: '2023-12-22', digits: 4, combinations: 24, pattern: 'urut'},
            {bbfs: '1389', frequency: 62, category: 'cool', lastSeen: '2023-12-21', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '0247', frequency: 61, category: 'cool', lastSeen: '2023-12-20', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '1456', frequency: 60, category: 'cool', lastSeen: '2023-12-19', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '2578', frequency: 59, category: 'cool', lastSeen: '2023-12-18', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '0369', frequency: 58, category: 'cool', lastSeen: '2023-12-17', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '01234567', frequency: 63, category: 'cool', lastSeen: '2023-12-22', digits: 8, combinations: 40320, pattern: 'urut'},
            {bbfs: '23456789', frequency: 62, category: 'cool', lastSeen: '2023-12-21', digits: 8, combinations: 40320, pattern: 'urut'},
            {bbfs: '0123456', frequency: 61, category: 'cool', lastSeen: '2023-12-20', digits: 7, combinations: 5040, pattern: 'urut'},
            {bbfs: '3456789', frequency: 60, category: 'cool', lastSeen: '2023-12-19', digits: 7, combinations: 5040, pattern: 'urut'},
            {bbfs: '012389', frequency: 59, category: 'cool', lastSeen: '2023-12-18', digits: 6, combinations: 720, pattern: 'mix'},
            {bbfs: '145678', frequency: 58, category: 'cool', lastSeen: '2023-12-17', digits: 6, combinations: 720, pattern: 'mix'},
            {bbfs: '023679', frequency: 57, category: 'cool', lastSeen: '2023-12-16', digits: 6, combinations: 720, pattern: 'mix'},
            {bbfs: '12478', frequency: 56, category: 'cool', lastSeen: '2023-12-15', digits: 5, combinations: 120, pattern: 'mix'},
            {bbfs: '03569', frequency: 55, category: 'cool', lastSeen: '2023-12-14', digits: 5, combinations: 120, pattern: 'mix'},
            {bbfs: '14789', frequency: 54, category: 'cool', lastSeen: '2023-12-13', digits: 5, combinations: 120, pattern: 'mix'},
            {bbfs: '02356', frequency: 53, category: 'cool', lastSeen: '2023-12-12', digits: 5, combinations: 120, pattern: 'mix'},
            {bbfs: '1478', frequency: 52, category: 'cool', lastSeen: '2023-12-11', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '0259', frequency: 51, category: 'cool', lastSeen: '2023-12-10', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '3678', frequency: 50, category: 'cool', lastSeen: '2023-12-09', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '1249', frequency: 49, category: 'cool', lastSeen: '2023-12-08', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '0358', frequency: 48, category: 'cool', lastSeen: '2023-12-07', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '1679', frequency: 47, category: 'cool', lastSeen: '2023-12-06', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '2458', frequency: 46, category: 'cool', lastSeen: '2023-12-05', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '0137', frequency: 45, category: 'cool', lastSeen: '2023-12-04', digits: 4, combinations: 24, pattern: 'mix'},

            // Cool BBFS (25-44%)
            {bbfs: '2689', frequency: 44, category: 'cold', lastSeen: '2023-12-03', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '1457', frequency: 43, category: 'cold', lastSeen: '2023-12-02', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '0368', frequency: 42, category: 'cold', lastSeen: '2023-12-01', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '2479', frequency: 41, category: 'cold', lastSeen: '2023-11-30', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '1358', frequency: 40, category: 'cold', lastSeen: '2023-11-29', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '0679', frequency: 39, category: 'cold', lastSeen: '2023-11-28', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '2348', frequency: 38, category: 'cold', lastSeen: '2023-11-27', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '1569', frequency: 37, category: 'cold', lastSeen: '2023-11-26', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '0278', frequency: 36, category: 'cold', lastSeen: '2023-11-25', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '3459', frequency: 35, category: 'cold', lastSeen: '2023-11-24', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '1678', frequency: 34, category: 'cold', lastSeen: '2023-11-23', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '0289', frequency: 33, category: 'cold', lastSeen: '2023-11-22', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '3567', frequency: 32, category: 'cold', lastSeen: '2023-11-21', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '1489', frequency: 31, category: 'cold', lastSeen: '2023-11-20', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '0257', frequency: 30, category: 'cold', lastSeen: '2023-11-19', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '3689', frequency: 29, category: 'cold', lastSeen: '2023-11-18', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '1247', frequency: 28, category: 'cold', lastSeen: '2023-11-17', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '0589', frequency: 27, category: 'cold', lastSeen: '2023-11-16', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '3467', frequency: 26, category: 'cold', lastSeen: '2023-11-15', digits: 4, combinations: 24, pattern: 'mix'},
            {bbfs: '1289', frequency: 25, category: 'cold', lastSeen: '2023-11-14', digits: 4, combinations: 24, pattern: 'mix'}
        ];

        let filteredBBFS = [...bbfsDatabase];
        let currentFilter = 'all';
        let selectedDigits = new Set();
        let killedDigits = new Set();

        // Fungsi prediksi BBFS berdasarkan kepala dan ekor
        function predictBBFS(kepala, ekor) {
            const kepalaStr = kepala.toString().padStart(2, '0');
            const ekorStr = ekor.toString().padStart(2, '0');
            
            // Ambil BBFS dari database kepala
            const kepalaBBFS = kepalaEkorDatabase[kepalaStr] || [];
            const ekorBBFS = kepalaEkorDatabase[ekorStr] || [];
            
            // Kombinasikan digit kepala dan ekor
            const allDigits = new Set([...kepalaStr, ...ekorStr]);
            
            // Cari BBFS yang mengandung digit kepala dan ekor
            const matchingBBFS = bbfsDatabase.filter(bbfs => {
                const bbfsDigits = new Set(bbfs.bbfs);
                return [...allDigits].every(digit => bbfsDigits.has(digit));
            });
            
            // Jika ada BBFS yang cocok, ambil yang frekuensi tertinggi
            if (matchingBBFS.length > 0) {
                const bestMatch = matchingBBFS.sort((a, b) => b.frequency - a.frequency)[0];
                return {
                    bbfs: bestMatch.bbfs,
                    accuracy: bestMatch.frequency,
                    source: 'database_match'
                };
            }
            
            // Jika tidak ada match, buat BBFS dari kombinasi kepala-ekor
            const predictedDigits = [...allDigits];
            
            // Tambahkan digit pelengkap berdasarkan pola
            const complementDigits = ['1', '3', '5', '7', '9']; // Digit ganjil sebagai pelengkap
            for (let digit of complementDigits) {
                if (!predictedDigits.includes(digit) && predictedDigits.length < 6) {
                    predictedDigits.push(digit);
                }
            }
            
            // Jika masih kurang, tambahkan digit genap
            const evenDigits = ['0', '2', '4', '6', '8'];
            for (let digit of evenDigits) {
                if (!predictedDigits.includes(digit) && predictedDigits.length < 6) {
                    predictedDigits.push(digit);
                }
            }
            
            const generatedBBFS = predictedDigits.sort().join('');
            
            return {
                bbfs: generatedBBFS,
                accuracy: 75 + Math.floor(Math.random() * 15), // 75-90% akurasi prediksi
                source: 'generated'
            };
        }

        // Fungsi untuk menampilkan hasil prediksi
        function showPredictionResult(kepala, ekor) {
            const prediction = predictBBFS(kepala, ekor);
            
            document.getElementById('predictedBBFS').textContent = prediction.bbfs;
            document.getElementById('predictionAccuracy').textContent = `${prediction.accuracy}%`;
            document.getElementById('predictionResult').classList.remove('hidden');
            
            // Highlight BBFS yang diprediksi di database jika ada
            const matchingBBFS = bbfsDatabase.find(b => b.bbfs === prediction.bbfs);
            if (matchingBBFS) {
                // Filter untuk menampilkan BBFS yang diprediksi
                filteredBBFS = [matchingBBFS];
                displayBBFS();
            }
        }

        // Initialize display
        function initializeDisplay() {
            updateStatistics();
            displayBBFS();
            displayTopPerformers();
            displayRecentHot();
        }

        // Update statistics
        function updateStatistics() {
            const total = bbfsDatabase.length;
            const hot = bbfsDatabase.filter(n => n.frequency >= 85).length;
            const warm = bbfsDatabase.filter(n => n.frequency >= 65 && n.frequency < 85).length;
            const cool = bbfsDatabase.filter(n => n.frequency >= 45 && n.frequency < 65).length;
            const avgCombinations = Math.round(bbfsDatabase.reduce((sum, b) => sum + b.combinations, 0) / total);

            document.getElementById('totalNumbers').textContent = total;
            document.getElementById('hotCount').textContent = hot;
            document.getElementById('warmCount').textContent = warm;
            document.getElementById('coolCount').textContent = cool;
            document.getElementById('avgCombo').textContent = avgCombinations;
        }

        // Get category class for BBFS
        function getCategoryClass(frequency) {
            if (frequency >= 85) return 'bbfs-hot';
            if (frequency >= 65) return 'bbfs-warm';
            if (frequency >= 45) return 'bbfs-cool';
            return 'bbfs-cold';
        }

        // Display BBFS
        function displayBBFS() {
            const container = document.getElementById('numbersDisplay');
            const viewMode = document.getElementById('viewSelect').value;
            
            if (viewMode === 'list') {
                container.className = 'space-y-3';
                container.innerHTML = filteredBBFS.map(bbfs => `
                    <div class="${getCategoryClass(bbfs.frequency)} rounded-lg p-4 flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="text-2xl font-bold font-mono">${bbfs.bbfs}</div>
                            <div class="text-sm opacity-90">
                                <div>Frekuensi: ${bbfs.frequency}%</div>
                                <div>Terakhir: ${bbfs.lastSeen}</div>
                                <div>Kombinasi: ${bbfs.combinations.toLocaleString()}</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="flex space-x-1 mb-2">
                                <span class="digit-badge">${bbfs.digits}D</span>
                                <span class="pattern-badge">${bbfs.pattern.toUpperCase()}</span>
                            </div>
                            <div class="w-20 bg-white bg-opacity-30 rounded-full h-2">
                                <div class="frequency-bar h-2 rounded-full" style="width: ${bbfs.frequency}%"></div>
                            </div>
                        </div>
                    </div>
                `).join('');
            } else if (viewMode === 'compact') {
                container.className = 'grid grid-cols-3 md:grid-cols-6 lg:grid-cols-8 gap-2';
                container.innerHTML = filteredBBFS.map(bbfs => `
                    <div class="${getCategoryClass(bbfs.frequency)} rounded-lg p-2 text-center">
                        <div class="font-bold text-sm font-mono">${bbfs.bbfs}</div>
                        <div class="text-xs opacity-75">${bbfs.frequency}%</div>
                        <div class="text-xs opacity-75">${bbfs.digits}D</div>
                    </div>
                `).join('');
            } else {
                container.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4';
                container.innerHTML = filteredBBFS.map(bbfs => `
                    <div class="${getCategoryClass(bbfs.frequency)} rounded-lg p-4 text-center card-hover">
                        <div class="text-2xl font-bold font-mono mb-2">${bbfs.bbfs}</div>
                        <div class="flex justify-center space-x-2 mb-3">
                            <span class="digit-badge">${bbfs.digits} Digit</span>
                            <span class="pattern-badge">${bbfs.pattern.toUpperCase()}</span>
                        </div>
                        <div class="text-sm opacity-90 mb-2">
                            <div>Frekuensi: ${bbfs.frequency}%</div>
                            <div class="text-xs">${bbfs.lastSeen}</div>
                            <div class="text-xs">Kombinasi: ${bbfs.combinations.toLocaleString()}</div>
                        </div>
                        <div class="w-full bg-white bg-opacity-30 rounded-full h-2">
                            <div class="frequency-bar h-2 rounded-full" style="width: ${bbfs.frequency}%"></div>
                        </div>
                    </div>
                `).join('');
            }

            document.getElementById('displayCount').textContent = filteredBBFS.length;
            document.getElementById('totalCount').textContent = bbfsDatabase.length;
        }

        // Display top BBFS performers
        function displayTopPerformers() {
            const top10 = [...bbfsDatabase]
                .sort((a, b) => b.frequency - a.frequency)
                .slice(0, 10);

            const container = document.getElementById('topPerformers');
            container.innerHTML = top10.map((bbfs, index) => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center text-sm font-bold">
                            ${index + 1}
                        </div>
                        <div class="font-bold text-lg font-mono">${bbfs.bbfs}</div>
                        <span class="digit-badge">${bbfs.digits}D</span>
                    </div>
                    <div class="text-right">
                        <div class="font-bold text-purple-600">${bbfs.frequency}%</div>
                        <div class="text-xs text-gray-500">${bbfs.combinations.toLocaleString()} kombinasi</div>
                    </div>
                </div>
            `).join('');
        }

        // Display recent hot BBFS
        function displayRecentHot() {
            const recentHot = bbfsDatabase
                .filter(n => n.frequency >= 80)
                .sort((a, b) => new Date(b.lastSeen) - new Date(a.lastSeen))
                .slice(0, 6);

            const container = document.getElementById('recentHot');
            container.innerHTML = recentHot.map(bbfs => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div class="flex items-center space-x-3">
                        <div class="font-bold text-lg font-mono">${bbfs.bbfs}</div>
                        <div class="flex space-x-1">
                            <span class="digit-badge">${bbfs.digits}D</span>
                            <span class="pattern-badge">${bbfs.pattern.toUpperCase()}</span>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-bold text-red-600">${bbfs.frequency}%</div>
                        <div class="text-xs text-gray-500">${bbfs.lastSeen}</div>
                    </div>
                </div>
            `).join('');
        }

        // Filter functions for BBFS
        function applyFilter(filterType) {
            currentFilter = filterType;
            
            // Reset button styles
            document.querySelectorAll('[id^="filter"]').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-white');
            });
            
            // Highlight active filter
            document.getElementById(`filter${filterType.charAt(0).toUpperCase() + filterType.slice(1)}`).classList.add('ring-2', 'ring-white');

            switch (filterType) {
                case 'all':
                    filteredBBFS = [...bbfsDatabase];
                    break;
                case 'hot':
                    filteredBBFS = bbfsDatabase.filter(n => n.frequency >= 85);
                    break;
                case 'warm':
                    filteredBBFS = bbfsDatabase.filter(n => n.frequency >= 65 && n.frequency < 85);
                    break;
                case 'cool':
                    filteredBBFS = bbfsDatabase.filter(n => n.frequency >= 45 && n.frequency < 65);
                    break;
                case 'cold':
                    filteredBBFS = bbfsDatabase.filter(n => n.frequency >= 25 && n.frequency < 45);
                    break;
                case '4d':
                    filteredBBFS = bbfsDatabase.filter(n => n.digits === 4);
                    break;
                case '5d':
                    filteredBBFS = bbfsDatabase.filter(n => n.digits === 5);
                    break;
                case '6d':
                    filteredBBFS = bbfsDatabase.filter(n => n.digits === 6);
                    break;
                case '7d':
                    filteredBBFS = bbfsDatabase.filter(n => n.digits === 7);
                    break;
                case '8d':
                    filteredBBFS = bbfsDatabase.filter(n => n.digits >= 8);
                    break;
            }
            
            applySorting();
            displayBBFS();
        }

        // Apply sorting for BBFS
        function applySorting() {
            const sortType = document.getElementById('sortSelect').value;
            
            switch (sortType) {
                case 'frequency':
                    filteredBBFS.sort((a, b) => b.frequency - a.frequency);
                    break;
                case 'combinations':
                    filteredBBFS.sort((a, b) => b.combinations - a.combinations);
                    break;
                case 'digits':
                    filteredBBFS.sort((a, b) => a.digits - b.digits);
                    break;
                case 'recent':
                    filteredBBFS.sort((a, b) => new Date(b.lastSeen) - new Date(a.lastSeen));
                    break;
            }
        }

        // Search function for BBFS
        function applySearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            if (searchTerm === '') {
                applyFilter(currentFilter);
                return;
            }
            
            filteredBBFS = filteredBBFS.filter(n => 
                n.bbfs.includes(searchTerm) || 
                n.pattern.includes(searchTerm)
            );
            
            displayBBFS();
        }

        // Export function for BBFS
        function exportData() {
            const data = filteredBBFS.map(n => 
                `${n.bbfs}\t${n.frequency}%\t${n.digits}\t${n.combinations}\t${n.lastSeen}\t${n.pattern}`
            ).join('\n');
            
            const header = 'BBFS\tFrekuensi\tDigit\tKombinasi\tTerakhir Keluar\tPola\n';
            const fullData = header + data;
            
            const blob = new Blob([fullData], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `database-bbfs-${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // BBFS Generator Functions
        function generatePermutations(digits) {
            if (digits.length < 4) return [];
            
            const result = [];
            const digitArray = Array.from(digits).sort();
            
            function permute(arr, start = 0) {
                if (start === arr.length - 1) {
                    const num = arr.join('');
                    if (num.length === 4) {
                        result.push(num);
                    }
                    return;
                }
                
                for (let i = start; i < arr.length; i++) {
                    [arr[start], arr[i]] = [arr[i], arr[start]];
                    permute(arr, start + 1);
                    [arr[start], arr[i]] = [arr[i], arr[start]];
                }
            }
            
            // Generate 4D combinations
            if (digitArray.length >= 4) {
                for (let i = 0; i < digitArray.length; i++) {
                    for (let j = i + 1; j < digitArray.length; j++) {
                        for (let k = j + 1; k < digitArray.length; k++) {
                            for (let l = k + 1; l < digitArray.length; l++) {
                                const combo = [digitArray[i], digitArray[j], digitArray[k], digitArray[l]];
                                permute([...combo]);
                            }
                        }
                    }
                }
            }
            
            return [...new Set(result)].sort();
        }

        function updateDigitSelection() {
            document.getElementById('selectedDigits').textContent = 
                selectedDigits.size > 0 ? Array.from(selectedDigits).sort().join(', ') : '-';
            document.getElementById('digitCount').textContent = selectedDigits.size;
        }

        // Fungsi untuk menampilkan weton hari ini
        function displayCurrentWeton() {
            const weton = getCurrentWeton();
            document.getElementById('todayWeton').textContent = weton.weton;
            document.getElementById('todayNeptu').textContent = weton.neptu;
        }

        // Event listeners untuk prediksi BBFS
        document.getElementById('predictBBFS').addEventListener('click', () => {
            const kepala = document.getElementById('kepalaInput').value.trim();
            const ekor = document.getElementById('ekorInput').value.trim();
            
            if (kepala.length !== 2 || ekor.length !== 2) {
                alert('Masukkan kepala dan ekor 2 digit (contoh: 12, 34)');
                return;
            }
            
            if (!/^\d{2}$/.test(kepala) || !/^\d{2}$/.test(ekor)) {
                alert('Kepala dan ekor harus berupa angka 2 digit');
                return;
            }
            
            showPredictionResult(kepala, ekor);
        });

        // Event listener untuk prediksi berdasarkan tanggal
        document.getElementById('predictDateBBFS').addEventListener('click', () => {
            const selectedDate = document.getElementById('dateInput').value;
            
            if (!selectedDate) {
                alert('Pilih tanggal terlebih dahulu');
                return;
            }
            
            const prediction = predictBBFSByDate(selectedDate);
            
            document.getElementById('datePredictedBBFS').textContent = prediction.bbfs;
            document.getElementById('dayName').textContent = prediction.dayName;
            document.getElementById('dateAccuracy').textContent = `${prediction.accuracy}%`;
            document.getElementById('datePredictionResult').classList.remove('hidden');
        });

        // Event listener untuk generate angka Jawa
        document.getElementById('generateJawaNumbers').addEventListener('click', () => {
            const selectedPasaran = document.getElementById('pasaranSelect').value;
            
            if (!selectedPasaran) {
                alert('Pilih pasaran Jawa terlebih dahulu');
                return;
            }
            
            const jawaNumbers = generateJawaNumbers(selectedPasaran);
            
            if (jawaNumbers) {
                document.getElementById('jawa2D').textContent = jawaNumbers.main2D;
                document.getElementById('jawaBBFS').textContent = jawaNumbers.bbfs;
                document.getElementById('selectedPasaran').textContent = selectedPasaran.charAt(0).toUpperCase() + selectedPasaran.slice(1);
                document.getElementById('pasaranMeaning').textContent = jawaNumbers.meaning;
                document.getElementById('jawaNumbersResult').classList.remove('hidden');
            }
        });

        // Event listeners untuk pembunuh angka
        document.querySelectorAll('.kill-digit-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const digit = this.dataset.digit;
                
                if (killedDigits.has(digit)) {
                    killedDigits.delete(digit);
                    this.classList.remove('bg-red-500', 'text-white');
                    this.classList.add('bg-gray-200');
                } else {
                    killedDigits.add(digit);
                    this.classList.add('bg-red-500', 'text-white');
                    this.classList.remove('bg-gray-200');
                }
                updateKilledDigits();
            });
        });

        document.getElementById('killNumbers').addEventListener('click', () => {
            const bbfsInput = document.getElementById('bbfsInput').value.trim();
            
            if (!bbfsInput) {
                alert('Masukkan BBFS terlebih dahulu (5-8 digit)');
                return;
            }
            
            if (bbfsInput.length < 5 || bbfsInput.length > 8) {
                alert('BBFS harus 5-8 digit');
                return;
            }
            
            if (!/^\d+$/.test(bbfsInput)) {
                alert('BBFS harus berupa angka');
                return;
            }
            
            if (killedDigits.size === 0) {
                alert('Pilih minimal 1 angka untuk dibunuh');
                return;
            }
            
            const result = killDigitsFromBBFS(bbfsInput, killedDigits);
            
            if (!result) {
                alert('Tidak bisa membunuh angka - digit tersisa kurang dari 4');
                return;
            }
            
            // Tampilkan hasil
            document.getElementById('remainingBBFS').textContent = result.remainingBBFS;
            document.getElementById('total4D').textContent = result.totalCombinations.toLocaleString();
            document.getElementById('killedList').textContent = result.killedDigits.join(', ');
            document.getElementById('killEffectiveness').textContent = `${result.effectiveness}% pengurangan`;
            
            // Tampilkan 4D yang dihasilkan
            const generated4DContainer = document.getElementById('generated4D');
            if (result.generated4D.length > 0) {
                generated4DContainer.innerHTML = `
                    <div class="grid grid-cols-6 gap-1 text-xs">
                        ${result.generated4D.slice(0, 100).map(num => `
                            <div class="bg-blue-100 text-blue-800 rounded px-1 py-0.5 text-center font-mono">
                                ${num}
                            </div>
                        `).join('')}
                        ${result.generated4D.length > 100 ? `
                            <div class="col-span-6 text-center text-gray-500 text-xs mt-2">
                                ... dan ${(result.generated4D.length - 100).toLocaleString()} lainnya
                            </div>
                        ` : ''}
                    </div>
                    <div class="mt-2 flex space-x-2">
                        <button onclick="copyKilled4D()" class="bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded text-xs">
                            üìã Copy All 4D
                        </button>
                        <button onclick="exportKilled4D()" class="bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded text-xs">
                            üíæ Export 4D
                        </button>
                    </div>
                `;
            }
            
            document.getElementById('killResult').classList.remove('hidden');
        });

        // Input validation untuk BBFS
        document.getElementById('bbfsInput').addEventListener('input', function() {
            this.value = this.value.replace(/\D/g, '').substring(0, 8);
        });

        // Set tanggal hari ini sebagai default
        document.getElementById('dateInput').valueAsDate = new Date();

        // Input validation untuk kepala dan ekor
        document.getElementById('kepalaInput').addEventListener('input', function() {
            this.value = this.value.replace(/\D/g, '').substring(0, 2);
        });

        document.getElementById('ekorInput').addEventListener('input', function() {
            this.value = this.value.replace(/\D/g, '').substring(0, 2);
        });

        // Event listeners for BBFS
        document.getElementById('filterAll').addEventListener('click', () => applyFilter('all'));
        document.getElementById('filterHot').addEventListener('click', () => applyFilter('hot'));
        document.getElementById('filterWarm').addEventListener('click', () => applyFilter('warm'));
        document.getElementById('filterCool').addEventListener('click', () => applyFilter('cool'));
        document.getElementById('filterCold').addEventListener('click', () => applyFilter('cold'));
        document.getElementById('filter4D').addEventListener('click', () => applyFilter('4d'));
        document.getElementById('filter5D').addEventListener('click', () => applyFilter('5d'));
        document.getElementById('filter6D').addEventListener('click', () => applyFilter('6d'));
        document.getElementById('filter7D').addEventListener('click', () => applyFilter('7d'));
        document.getElementById('filter8D').addEventListener('click', () => applyFilter('8d'));

        document.getElementById('sortSelect').addEventListener('change', () => {
            applySorting();
            displayBBFS();
        });

        document.getElementById('viewSelect').addEventListener('change', displayBBFS);

        document.getElementById('searchInput').addEventListener('input', applySearch);

        document.getElementById('exportBtn').addEventListener('click', exportData);

        document.getElementById('refreshBtn').addEventListener('click', () => {
            // Simulate data refresh
            document.getElementById('refreshBtn').innerHTML = '‚è≥ Refreshing...';
            setTimeout(() => {
                document.getElementById('refreshBtn').innerHTML = 'üîÑ Refresh';
                initializeDisplay();
            }, 1000);
        });

        // Generator modal events
        document.getElementById('generateBtn').addEventListener('click', () => {
            document.getElementById('generatorModal').classList.remove('hidden');
        });

        document.getElementById('closeModal').addEventListener('click', () => {
            document.getElementById('generatorModal').classList.add('hidden');
        });

        // Digit selector events
        document.querySelectorAll('.digit-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const digit = this.dataset.digit;
                
                if (selectedDigits.has(digit)) {
                    selectedDigits.delete(digit);
                    this.classList.remove('bbfs-generator');
                    this.classList.add('bg-gray-200');
                } else {
                    if (selectedDigits.size < 9) {
                        selectedDigits.add(digit);
                        this.classList.add('bbfs-generator');
                        this.classList.remove('bg-gray-200');
                    } else {
                        alert('Maksimal 9 digit!');
                    }
                }
                updateDigitSelection();
            });
        });

        document.getElementById('clearSelection').addEventListener('click', () => {
            selectedDigits.clear();
            document.querySelectorAll('.digit-btn').forEach(btn => {
                btn.classList.remove('bbfs-generator');
                btn.classList.add('bg-gray-200');
            });
            updateDigitSelection();
            document.getElementById('generatedCombinations').innerHTML = '';
        });

        document.getElementById('generateCombinations').addEventListener('click', () => {
            if (selectedDigits.size < 4) {
                alert('Minimal 4 digit untuk generate BBFS!');
                return;
            }

            const combinations = generatePermutations(selectedDigits);
            const container = document.getElementById('generatedCombinations');
            
            if (combinations.length > 0) {
                container.innerHTML = `
                    <div class="bg-green-50 rounded-lg p-4">
                        <h4 class="font-semibold text-green-800 mb-3">
                            BBFS: ${Array.from(selectedDigits).sort().join('')} 
                            (${combinations.length} kombinasi 4D)
                        </h4>
                        <div class="grid grid-cols-6 gap-2 max-h-32 overflow-y-auto">
                            ${combinations.map(combo => `
                                <div class="bg-white border border-green-200 rounded px-2 py-1 text-center text-sm font-mono">
                                    ${combo}
                                </div>
                            `).join('')}
                        </div>
                        <div class="mt-3 flex space-x-2">
                            <button onclick="copyGeneratedCombinations()" class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm">
                                üìã Copy All
                            </button>
                            <button onclick="exportGeneratedCombinations()" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm">
                                üíæ Export
                            </button>
                        </div>
                    </div>
                `;
            } else {
                container.innerHTML = '<div class="text-red-500 text-center">Tidak dapat generate kombinasi</div>';
            }
        });

        // Global functions for generated combinations
        window.copyGeneratedCombinations = function() {
            const combinations = generatePermutations(selectedDigits);
            const text = combinations.join('\n');
            navigator.clipboard.writeText(text).then(() => {
                alert('Kombinasi berhasil di-copy!');
            });
        };

        window.exportGeneratedCombinations = function() {
            const combinations = generatePermutations(selectedDigits);
            const bbfsString = Array.from(selectedDigits).sort().join('');
            const text = `BBFS: ${bbfsString}\nTotal Kombinasi: ${combinations.length}\n\n${combinations.join('\n')}`;
            
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `bbfs-${bbfsString}-${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        };

        // Global functions for killed digits 4D
        window.copyKilled4D = function() {
            const bbfsInput = document.getElementById('bbfsInput').value.trim();
            const result = killDigitsFromBBFS(bbfsInput, killedDigits);
            
            if (result && result.generated4D.length > 0) {
                const text = result.generated4D.join('\n');
                navigator.clipboard.writeText(text).then(() => {
                    alert(`${result.generated4D.length} angka 4D berhasil di-copy!`);
                });
            }
        };

        window.exportKilled4D = function() {
            const bbfsInput = document.getElementById('bbfsInput').value.trim();
            const result = killDigitsFromBBFS(bbfsInput, killedDigits);
            
            if (result && result.generated4D.length > 0) {
                const killedList = Array.from(killedDigits).sort().join(', ');
                const text = `BBFS Awal: ${bbfsInput}\nAngka Dibunuh: ${killedList}\nBBFS Tersisa: ${result.remainingBBFS}\nTotal 4D: ${result.totalCombinations}\nEfektivitas: ${result.effectiveness}% pengurangan\n\nDaftar 4D:\n${result.generated4D.join('\n')}`;
                
                const blob = new Blob([text], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `killed-4d-${result.remainingBBFS}-${new Date().toISOString().split('T')[0]}.txt`;
                a.click();
                URL.revokeObjectURL(url);
            }
        };

        // Close modal when clicking outside
        document.getElementById('generatorModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.add('hidden');
            }
        });

        // Initialize
        initializeDisplay();
        applyFilter('all');
        displayCurrentWeton();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9894f620b292d176',t:'MTc1OTU4Mzg2Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
